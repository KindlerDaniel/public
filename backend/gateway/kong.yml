_format_version: "3.0"

services:
  - name: auth-service
    url: http://authservice:4000
    routes:
      - paths:
          - /api/auth
        strip_path: true

  - name: media-service
    url: http://socialmedia-mediaservice:3001
    routes:
      - paths:
          - /api/media
        strip_path: true

plugins:
  - name: cors
    config:
      origins:
        - "http://localhost:3000"
      methods:
        - GET
        - POST
        - PUT
        - DELETE
        - OPTIONS
      headers:
        - Authorization
        - Content-Type
        - X-Auth-Token
      exposed_headers:
        - X-Auth-Token
      credentials: true
      max_age: 3600

